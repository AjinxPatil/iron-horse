<tal:main_template define="main_template load: main_template.pt" metal:use-macro="main_template">
<div metal:fill-slot='body'>
    <div class="container">
        <h1>
            ${doc_helper.unpack_name_string(consist)}
            (${base_lang_strings[consist.str_name_suffix] if consist.str_name_suffix is not None else None})
        </h1>
        <table>
            <tbody>
                <tal:liveries repeat="livery_variant doc_helper.get_docs_livery_variants(consist)">
                    <tal:block repeat="livery_name livery_variant.keys()">
                        <tr>
                            <td style="vertical-align:top;">
                                <div class="vehicle-image"
                                    style="width:${2 * doc_helper.buy_menu_sprite_max_width}; margin-top:52px;">
                                    <img src="static/img/${consist.id}_${livery_name}.png"
                                         width="${2 * doc_helper.buy_menu_sprite_width(consist)}"
                                         height="${2 * doc_helper.buy_menu_sprite_height}" />
                                </div>
                            </td>
                            <td style="vertical-align:top;">
                                <div class="vehicle-image"
                                    style="width:${4 * doc_helper.buy_menu_sprite_max_width}; margin-left:64px; margin-right:64px; margin-top:32px; margin-bottom:32px;">
                                    <img src="static/img/${consist.id}_${livery_name}.png"
                                         width="${4 * doc_helper.buy_menu_sprite_width(consist)}"
                                         height="${4 * doc_helper.buy_menu_sprite_height}" />
                                </div>
                            </td>
                            <td style="vertical-align:top; padding-top:52px;">
                                <tal:livery_info switch="repeat.livery_variant.index == 0">
                                    <tal:default case="True">
                                        DEFAULT with CC1 set to ${livery_variant[livery_name]['CC1']} and CC2 set to ${livery_variant[livery_name]['CC2']}
                                    </tal:default>
                                    <tal:cc_livery case="False">
                                        <tal:cc_livery_metadata define="cc_livery_metadata consist.gestalt_graphics.cc_liveries[repeat.livery_variant.index - 1]">
                                            VARIANT with CC1 set to ${livery_variant[livery_name]['CC1']} and CC2 set to ${livery_variant[livery_name]['CC2']}
                                            <br />
                                            This variant will be shown if CC1 is set to: ${', '.join(cc_livery_metadata['cc1'])}
                                            <br />
                                            <tal:block condition="len(cc_livery_metadata['not_cc2']) > 0">
                                                AND CC2 is not set to: ${', '.join(cc_livery_metadata['not_cc2'])}
                                            </tal:block>
                                        </tal:cc_livery_metadata>
                                    </tal:cc_livery>
                                </tal:livery_info>
                            </td>
                        </tr>
                    </tal:block>
                </tal:liveries>
            </tbody>
        </table>

        <dl>
            <dt>Role</dt>
            <dd>${doc_helper.unpack_role_string_for_consist(consist)}</dd>
            <dt>Intro date / Designed</dt>
            <dd>${consist.intro_date}</dd>
            <dt>Power</dt>
            <dd>${consist.power} hp</dd>
            <dt>Speed</dt>
            <dd>${consist.speed} mph</dd>
            <dt>Track type</dt>
            <dd>${consist.track_type}</dd>
        </dl>

        <dl>
            <dt>Replaces</dt>
            <tal:replaces condition="len(consist.replaces_consists) > 0">
                 <tal:replaced_consist repeat="replaced_consist consist.replaces_consists">
                    <dd>
                        <a href="${replaced_consist.id}.html">${doc_helper.get_replaced_by_name(replaced_consist.id, consists)}</a>
                    </dd>
                 </tal:replaced_consist>
            </tal:replaces>
            <tal:replaces_none condition="len(consist.replaces_consists) == 0">
                <dd>None</dd>
            </tal:replaces_none>

            <dt>Replaced by</dt>
            <tal:replacement condition="consist.replacement_consist is not None">
                <dd>
                    <a href="${consist.replacement_consist.id}.html">${doc_helper.get_replaced_by_name(consist.replacement_consist.id, consists)}</a>
                </dd>
            </tal:replacement>
            <tal:replacement_is_none condition="consist.replacement_consist is None">
                <dd>None</dd>
            </tal:replacement_is_none>

            <p>${structure:consist.description}</p>
        </dl>
    </div>
</div>
</tal:main_template>
