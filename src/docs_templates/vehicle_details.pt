<tal:title define="global title python: doc_helper.unpack_name_string(consist) + ' - Iron Horse'" />

<tal:main_template define="main_template load: main_template.pt" metal:use-macro="main_template">
<div metal:fill-slot='body'>
    <div class="container">
        <h1>
            ${doc_helper.unpack_name_string(consist)}
            (${base_lang_strings[consist.str_name_suffix] if consist.str_name_suffix is not None else None})
        </h1>
        <div>
            <tal:livery repeat="livery_variant doc_helper.get_docs_livery_variants(consist)">
                <tal:block repeat="livery_name livery_variant.keys()">
                    <div class="vehicle-image"
                        style="width:${4 * doc_helper.buy_menu_sprite_max_width}; display:inline-block;">
                        <img src="static/img/${consist.id}_${livery_name}.png"
                             width="${4 * doc_helper.buy_menu_sprite_width(consist)}"
                             height="${4 * doc_helper.buy_menu_sprite_height}" />
                    </div>
                </tal:block>
            </tal:livery>
        </div>
        <dl>
            <dt>Role</dt>
            <dd>${doc_helper.unpack_role_string_for_consist(consist)}</dd>
            <dt>Intro date / Designed</dt>
            <dd>${consist.intro_date}</dd>
            <dt>Power</dt>
            <dd>${consist.power} hp</dd>
            <dt>Speed</dt>
            <dd>${consist.speed} mph</dd>
            <dt>Track type</dt>
            <dd>${consist.track_type}</dd>
        </dl>

        <dl>
            <dt>Replaces</dt>
            <tal:replaces condition="len(consist.replaces_consists) > 0">
                 <tal:replaced_consist repeat="replaced_consist consist.replaces_consists">
                    <dd>
                        <a href="${replaced_consist.id}.html">${doc_helper.get_replaced_by_name(replaced_consist.id, consists)}</a>
                    </dd>
                 </tal:replaced_consist>
            </tal:replaces>
            <tal:replaces_none condition="len(consist.replaces_consists) == 0">
                <dd>None</dd>
            </tal:replaces_none>

            <dt>Replaced by</dt>
            <tal:replacement condition="consist.replacement_consist is not None">
                <dd>
                    <a href="${consist.replacement_consist.id}.html">${doc_helper.get_replaced_by_name(consist.replacement_consist.id, consists)}</a>
                </dd>
            </tal:replacement>
            <tal:replacement_is_none condition="consist.replacement_consist is None">
                <dd>None</dd>
            </tal:replacement_is_none>

            <p>${structure:consist.description}</p>
        </dl>

        <table style="width:100%; background-color:#eee; border-color:solid 1px #80c4fc; border-radius:4px; background:#e0f4fc; color:black;">
            <thead>
                <td style="min-width:160px; width:160px; background:#1878dc; border-top-left-radius:4px;"><!--! empty spacer --></td>
                <tal:livery repeat="livery_variant doc_helper.get_docs_livery_variants(consist)">
                    <th style="padding:16px;
                               padding-bottom:0;
                               text-align:left;
                               border-left: solid 1px #b4dcec;
                               width:330px;">
                        <!--!Livery ${repeat.livery_variant.number}-->
                        ${'Default' if repeat.livery_variant.number == 1 else 'Alternative'} Livery
                    </th>
                </tal:livery>
                <tal:block condition="len(doc_helper.get_docs_livery_variants(consist)) == 1">
                    <td style="border-left: solid 1px #b4dcec;"><!--! empty spacer td if only 1 livery --></td>
                </tal:block>
            </thead>
            <tbody>
                <tr style="vertical-align:top;">
                    <th style="padding:16px; text-align:right; background:#1878dc; color:white;">
                        Company Colour 1
                    </th>
                    <tal:liveries repeat="livery_variant doc_helper.get_docs_livery_variants(consist)">
                        <td style="padding:16px; border-left:solid 1px #b4dcec;">
                            <tal:not_cc_livery condition="repeat.livery_variant.index == 0">
                                <tal:block condition="len(doc_helper.get_docs_livery_variants(consist)) == 1">
                                    Any
                                </tal:block>
                                <tal:block condition="len(doc_helper.get_docs_livery_variants(consist)) > 1">
                                    Any if the rules for the alternative livery are not matched.
                                </tal:block>
                            </tal:not_cc_livery>
                            <tal:cc_livery condition="repeat.livery_variant.index != 0">
                                <tal:alternative_cc_livery_metadata define="alternative_cc_livery_metadata consist.gestalt_graphics.alternative_cc_livery">
                                    <ul style="list-style-type:none; margin-left:0; margin-top:0; max-width:305px;">
                                        <li style="line-height:1; display:inline-block; width:95px;"
                                            tal:repeat="cc1 alternative_cc_livery_metadata['cc1']">
                                            <span style="background:linear-gradient(-45deg, rgb${doc_helper.get_company_colour_as_rgb(cc1, offset=3)}, rgb${doc_helper.get_company_colour_as_rgb(cc1, offset=7)});
                                                         display:inline-block;
                                                         vertical-align:middle;
                                                         border: solid 1px #555;
                                                         width:12px;
                                                         height:12px;">
                                            </span>
                                            ${doc_helper.company_colour_names[cc1]}
                                        </li>
                                    </ul>
                                </tal:alternative_cc_livery_metadata>
                            </tal:cc_livery>
                        </td>
                    </tal:liveries>
                    <tal:block condition="len(doc_helper.get_docs_livery_variants(consist)) == 1">
                        <td style="border-left: solid 1px #b4dcec;"><!--! empty spacer td if only 1 livery --></td>
                    </tal:block>
                </tr>
                <tr style="vertical-align:top;">
                    <th style="padding:16px; text-align:right; background:#1878dc; color:white;">
                        Company Colour 2
                    </th>
                    <tal:liveries repeat="livery_variant doc_helper.get_docs_livery_variants(consist)">
                        <td style="padding:16px; border-left:solid 1px #b4dcec;">
                            <tal:default_livery condition="repeat.livery_variant.index == 0">
                                Any
                            </tal:default_livery>
                            <tal:cc_livery condition="repeat.livery_variant.index != 0">
                                <tal:alternative_cc_livery_metadata define="alternative_cc_livery_metadata consist.gestalt_graphics.alternative_cc_livery">
                                    <tal:block condition="len(alternative_cc_livery_metadata['not_cc2']) == 0">
                                        Any
                                    </tal:block>
                                    <tal:block condition="len(alternative_cc_livery_metadata['not_cc2']) > 0">
                                        Any Except: <ul style="list-style-type:none; margin-left:0; margin-top:0; max-width:330px;">
                                            <li style="line-height:1; display:inline-block; width:95px;"
                                                tal:repeat="not_cc2 alternative_cc_livery_metadata['not_cc2']">
                                                <span style="background:linear-gradient(-45deg, rgb${doc_helper.get_company_colour_as_rgb(not_cc2, offset=3)}, rgb${doc_helper.get_company_colour_as_rgb(not_cc2, offset=7)});
                                                             display:inline-block;
                                                             vertical-align:middle;
                                                             border: solid 1px #555;
                                                             width:12px;
                                                             height:12px;">
                                                </span>
                                                ${doc_helper.company_colour_names[not_cc2]}
                                            </li>
                                        </ul>
                                    </tal:block>
                                </tal:alternative_cc_livery_metadata>
                            </tal:cc_livery>
                        </td>
                    </tal:liveries>
                    <tal:block condition="len(doc_helper.get_docs_livery_variants(consist)) == 1">
                        <td style="border-left: solid 1px #b4dcec;"><!--! empty spacer td if only 1 livery --></td>
                    </tal:block>
                </tr>
                <tr style="vertical-align:top;">
                    <th style="padding:16px; text-align:right; background:#1878dc; border-bottom-left-radius:4px; color:white;">
                        Examples
                    </th>
                    <tal:liveries repeat="livery_variant doc_helper.get_docs_livery_variants(consist)">
                        <td style="padding:16px; border-left:solid 1px #b4dcec;">
                            <tal:block repeat="livery_name livery_variant.keys()">
                                <div style="margin-bottom:16px;">
                                    <div style="display:inline-block; width:100px;">
                                        <tal:colours repeat="company_colour livery_variant[livery_name]['docs_image_input_cc']">
                                            <!--! !! probably should be a caption for a figure ?? -->
                                            <span style="background:linear-gradient(-45deg, rgb${doc_helper.get_company_colour_as_rgb(company_colour, offset=3)}, rgb${doc_helper.get_company_colour_as_rgb(company_colour, offset=7)});
                                                         display:inline-block;
                                                         vertical-align:middle;
                                                         border: solid 1px #555;
                                                         width:12px;
                                                         height:12px;">
                                            </span>
                                            <span style="vertical-align:middle; font-size:12px;">${doc_helper.company_colour_names[company_colour]}</span>
                                            <br />
                                        </tal:colours>
                                    </div>
                                    <div class="vehicle-image"
                                        style="width:${3 * doc_helper.buy_menu_sprite_max_width}; display:inline-block; vertical-align:top; margin-top:-8px; margin-bottom:10px;">
                                        <img src="static/img/${consist.id}_${livery_name}.png"
                                             width="${3 * doc_helper.buy_menu_sprite_width(consist)}"
                                             height="${3 * doc_helper.buy_menu_sprite_height}" />
                                    </div>
                                </div>
                            </tal:block>
                        </td>
                    </tal:liveries>
                    <tal:block condition="len(doc_helper.get_docs_livery_variants(consist)) == 1">
                        <td style="border-left: solid 1px #b4dcec;"><!--! empty spacer td if only 1 livery --></td>
                    </tal:block>
                </tr>
            </tbody>
        </table>
        <br /><br /><br />
    </div>
</div>
</tal:main_template>
