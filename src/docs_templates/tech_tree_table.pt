<tal:main_template define="main_template load: main_template.pt" metal:use-macro="main_template">
<div metal:fill-slot='body'>

    <div class="row">
        <div class="span12">
            <tal:base_track_type repeat="base_track_type doc_helper.get_base_track_types()">
                <h3>${base_track_type[1]}</h3>
                <table style="width:100%;"
                       tal:define="intro_dates doc_helper.get_roster_by_id('pony').intro_dates[base_track_type[0]]">
                    <thead>
                        <tr>
                            <th style="text-align:right; padding-right: 20px;">Intro Date:</th>
                            <th style="padding-right: 20px;" tal:repeat="intro_date intro_dates">${intro_date}</th>
                            <td><!--! empty space cell --></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr tal:repeat="role doc_helper.engine_roles(base_track_type)"
                            style="border-top: solid ${'2px #ccc' if role in ['branch_freight', 'heavy_freight_1', 'heavy_express_1', 'pax_railcar_1', 'hst', 'lolz'] else '1px #eee'};
                                   box-shadow: inset 0 -1px #fff;
                                   background: linear-gradient(180deg, #fff 0%, #fafafa 100%);">
                            <th style="text-align: right; width: 180px; padding-right: 20px;">
                                <!--! this string mangling will be fragile if roles change eh -->
                                <span tal:condition="'pax' in role">
                                    Passenger
                                </span>
                                <span tal:condition="'mail' in role">
                                    Mail
                                </span>
                                <span tal:condition="'railcar' in role">
                                    Railcar
                                </span>
                                <span tal:condition="'heavy' in role">
                                    Heavy
                                </span>
                                <span tal:condition="'mail_railcar' not in role and 'pax_railcar' not in role">
                                    ${doc_helper.get_role_string_from_role(role)}
                                </span>
                            </th>
                            <td tal:repeat="gen range(len(intro_dates))" class="text-center" style="width: 160px;">
                                <tal:consist define="consist doc_helper.get_engine_by_role_and_base_track_type_and_generation(role, base_track_type, gen + 1)">
                                    <tal:block condition="consist is not None">
                                        <div class="tech_tree_vehicle_container">
                                            <div class="tech_tree_vehicle
                                                        ${'tech_tree_vehicle_electric' if consist.requires_electric_rails else 'None'}
                                                        ${'tech_tree_vehicle_electro_diesel' if consist.str_name_suffix == 'STR_NAME_SUFFIX_ELECTRODIESEL' else None}
                                                        ${'tech_tree_vehicle_arrow' if doc_helper.get_engine_by_role_and_base_track_type_and_generation(role, base_track_type, gen + 2) is not None else None}">
                                                <span style="display:block;">
                                                    CABBAGE
                                                    <!--! ${doc_helper.unpack_name_string(consist).split('(')[0]} -->
                                                </span>
                                                <img src="static/img/${consist.id}_blue.png"
                                                     width="${2 * doc_helper.buy_menu_sprite_width(consist)}"
                                                     height="${2 * doc_helper.buy_menu_sprite_height}" />
                                                <span style="display:block; margin-top: 5px;" class="muted">
                                                    <small style="display:block;">
                                                        CABBAGE
                                                        <!--! ${doc_helper.unpack_name_string(consist).split('(')[1][:-1]} -->
                                                    </small>
                                                    <small>${consist.power}hp</small>
                                                    |
                                                    <small>${consist.speed}mph</small>
                                                </span>
                                            </div>
                                        </div>
                                    </tal:block>
                                </tal:consist>
                            </td>
                            <td><!--! empty space cell --></td>
                        </tr>
                    </tbody>
                </table>
            </tal:base_track_type>
        </div>
    </div>

</div>
</tal:main_template>
